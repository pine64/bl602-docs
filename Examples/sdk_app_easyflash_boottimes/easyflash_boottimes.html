

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>27. Easyflash4 boot times &mdash; BL602 IoT SDK (Pine64 fork)  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  
    <link rel="canonical" href="https://pine64.github.io/bl602-docs/Examples/sdk_app_easyflash_boottimes/easyflash_boottimes.html" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="28. Pwm" href="../sdk_app_pwm/pwm.html" />
    <link rel="prev" title="26. Zigbee" href="../demo_zb/zigbee.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> BL602 IoT SDK (Pine64 fork)
          

          
          </a>

          
            
            
              <div class="version">
                release_bl_iot_sdk_1.6.11-1-g66bb28da-pine64
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">Quick Start Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Quickstart_Guide/get_started.html">1. Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Quickstart_Guide/Linux/Quickstart_Linux_ubuntu.html">2. Linux Starter Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Quickstart_Guide/Windows/Quickstart_Windows_msys.html">3. Windows Starter Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Quickstart_Guide/Windows/Quickstart_Windows_wsl.html">4. Windows (WSL) Starter Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Quickstart_Guide/connecting_the_hardware.html">5. Connecting the Hardware</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Developer Environment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Developer_Environment/Setting_Up.html">1. Developer Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer_Environment/BLFlashEnv/BLFlashEnv.html">2. Dev Cube introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer_Environment/BLFlashEnv/BLFlashEnv.html#image-composition">3. Image Composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer_Environment/BLFlashEnv/BLFlashEnv.html#mcu-program-download">4. MCU Program Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer_Environment/BLFlashEnv/BLFlashEnv.html#iot-program-download">5. IOT program download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer_Environment/freedom_studio/freedom_studio.html">6. Freedom Studio</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Developer_Environment/eclipse/eclipse.html">7. Eclipse</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../README.html">1. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../helloworld/helloworld.html">2. Hello World</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_aws/aws.html">3. AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_at/AT.html">4. AT Commands Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_at/AT.html#basic-at-commands">5. Basic AT Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_at/AT.html#wi-fi-at-commands">6. Wi-Fi AT Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_at/AT.html#tcp-ip-at-commands">7. TCP/IP AT Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_at/AT.html#ble-at-commands">8. BLE AT Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_audio_udp/audio_udp.html">9. AUDIO UDP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_ble/ble.html">10. BLE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_blsync_ble/blsync_ble.html">11. BLSYNC-BLE</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_cronalarm/cronalarm.html">12. cronalarm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_dac/DAC.html">13. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_hbnram/hbnram.html">14. HBNRAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_mesh/mesh.html">15. Mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_peripherals_gpio/GPIO.html">16. GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_peripherals_uart_echo/uart_echo.html">17. UART_echo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_peripherals_uart_ioctl/uart_ioctl.html">18. UART_ioctl</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_protocols_http/http.html">19. Http client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_protocols_httpc/httpc.html">20. Httpc client</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_storage_psm/psm.html">21. PSM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_storage_romfs/romfs.html">22. Romfs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_system_cli/cli.html">23. cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_system_fdt/fdt.html">24. FDT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_wifi/wifi.html">25. Wi-Fi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../demo_zb/zigbee.html">26. Zigbee</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">27. Easyflash4 boot times</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">27.1. 总览</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">27.2. 算法实现</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">27.2.1. 1.首次使用</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kv1kv2kv3">27.2.2. 2.添加 KV1、KV2、KV3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kv2-kv3-kv1-kv4">27.2.3. 3.修改 KV2 KV3，删除 KV1，添加 KV4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kv5-kv6-gc-garbage-clear">27.2.4. 4.添加 KV5 KV6，触发 GC （Garbage Clear）</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#boot-times">27.3. boot times测试</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id6">27.3.1. 1. 测试流程以及效果</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">27.3.2. 2. 测试分析</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sdk_app_pwm/pwm.html">28. Pwm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../benchmark_security_aes/benchmark_security_aes_gcm.html">29. AES-GCM</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Components/Command_line/helper.html">1. helper</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Components/Command_line/aos_cli.html">2. cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Components/Middleware/dts/devicetree.html">3. device tree</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Components/Middleware/log/blog.html">4. blog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Components/Middleware/vfs/vfs.html">5. AOS VFS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Components/Middleware/yloop/yloop.html">6. Yloop</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Components/Network/wifi/wifi.html">7. WiFi</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Components/BLE/ble_stack/ble_stack.html">8. BLE</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../API/sys/cronalarms.html">1. cronalarms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../API/wifi/wifi_mgmr.html">2. Wi-Fi Manager</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../README/README.html">1. Documentation</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BL602 IoT SDK (Pine64 fork)</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">27. </span>Easyflash4 boot times</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/Examples/sdk_app_easyflash_boottimes/easyflash_boottimes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="easyflash4-boot-times">
<span id="easyflash-boottimes-index"></span><h1><span class="section-number">27. </span>Easyflash4 boot times<a class="headerlink" href="#easyflash4-boot-times" title="Permalink to this heading">¶</a></h1>
<section id="id1">
<h2><span class="section-number">27.1. </span>总览<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h2>
<p>本示例主要介绍Easyflash4 启动读写测试相关</p>
</section>
<section id="id2">
<h2><span class="section-number">27.2. </span>算法实现<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h2>
<section id="id3">
<span id="id4"></span><h3><span class="section-number">27.2.1. </span>1.首次使用<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<ul>
<li><p>假定 ENV 分区里有 4 个扇区，以下将按照操作 ENV 的方式，逐一举例讲解不同操作下，对应的 Flash 状态及数据变化。</p>
<blockquote>
<div><figure class="align-default">
<img alt="" src="../../_images/image124.png" />
</figure>
</div></blockquote>
</li>
<li><p>首次使用时，EasyFlash 会检查各个扇区的 header，如果不符合规定的格式将执行全部格式化操作，格式化后，每个扇区的顶部将被存入 header ，负责记录当前扇区的状态、魔数等信息。格式化的初始化状态为空状态。</p></li>
</ul>
</section>
<section id="kv1kv2kv3">
<span id="kv"></span><h3><span class="section-number">27.2.2. </span>2.添加 KV1、KV2、KV3<a class="headerlink" href="#kv1kv2kv3" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><figure class="align-default">
<img alt="" src="../../_images/image219.png" />
</figure>
</div></blockquote>
<ul class="simple">
<li><p>在执行添加操作前，会先检索合适地址来存放即将添加的新 KV，这里检索策略主要是：</p></li>
</ul>
<ol class="arabic simple">
<li><p>确定当前选择的扇区剩余容量充足</p></li>
<li><p>优选选择正在使用状态的扇区，最后使用空状态扇区</p></li>
<li><p>检查新 KV 是否有同名的 KV 存在，存在还需要额外执行删除旧值的动作</p></li>
</ol>
<ul class="simple">
<li><p>通过上图可以看出， KV1、KV2 及 KV3 已经被放入 sector1 ，添加后，扇区状态也被修改为正在使用。</p></li>
</ul>
</section>
<section id="kv2-kv3-kv1-kv4">
<span id="id5"></span><h3><span class="section-number">27.2.3. </span>3.修改 KV2 KV3，删除 KV1，添加 KV4<a class="headerlink" href="#kv2-kv3-kv1-kv4" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><figure class="align-default">
<img alt="" src="../../_images/image317.png" />
</figure>
</div></blockquote>
<ul class="simple">
<li><p>修改 ENV 时，旧的 ENV 将被删除，扇区的状态也将被修改为脏状态，然后再执行新增 ENV 的操作。</p></li>
</ul>
<ol class="arabic simple">
<li><p>执行修改 KV2 时，已经存在的 KV2 旧值被修改为已删除，sector1 状态被修改为脏状态，此后将 KV2 新值放入 sector1，发现 sector1 已经没有空间了，sector1 的状态还会被修改为已满状态；</p></li>
<li><p>执行修改 KV3 时，已经存在的 KV3 旧值被修改为已删除，sector1 状态已经为脏状态，无需再做修改。经过查找发现 KV3 的新值只能放到 sector2，放到 sector2 后将其修改为正在使用状态；</p></li>
<li><p>执行删除 KV1 时，找到 KV1 的位置，将其修改为已删除状态，sector1 状态已经为脏状态，无需再做修改；</p></li>
<li><p>执行添加 KV4 时，经过查找在 sector2 找到合适的存储位置，将其添加后，sector2 状态已经为正在使用状态，无需再做修改。</p></li>
</ol>
</section>
<section id="kv5-kv6-gc-garbage-clear">
<span id="gc"></span><h3><span class="section-number">27.2.4. </span>4.添加 KV5 KV6，触发 GC （Garbage Clear）<a class="headerlink" href="#kv5-kv6-gc-garbage-clear" title="Permalink to this heading">¶</a></h3>
<blockquote>
<div><figure class="align-default">
<img alt="" src="../../_images/image46.png" />
</figure>
</div></blockquote>
<ul class="simple">
<li><p>执行添加 KV5 操作，由于 KV5 体积较大，sector2 放不下，所以只能放在一个新扇区 sector3 上，添加后，修改 sector3 状态为正在使用 ;</p></li>
<li><p>执行添加 KV6 操作，KV6 也只能放在 sector3 下，将其放入 sector 3 后，发现 sector3 空间已满，所以将其修改已满状态。执行完成后，发现整个 ENV 的 4 个扇区只有 1 个状态为空的扇区了，这个扇区如果再继续使用就没法再执行 GC 操作了，所以此时触发了 GC 请求；</p></li>
<li><p>执行 GC 请求，EasyFlash 会找到所有被标记为已满并且为脏状态的扇区，并将其内部的 ENV 搬运至其他位置。就这样 sector1 上的 KV2 被搬运至了 sector2，腾空 sector1 后，又对其执行了格式化操作，这样整个 ENV 分区里又多了一个空状态的扇区。</p></li>
</ul>
</section>
</section>
<section id="boot-times">
<h2><span class="section-number">27.3. </span>boot times测试<a class="headerlink" href="#boot-times" title="Permalink to this heading">¶</a></h2>
<section id="id6">
<h3><span class="section-number">27.3.1. </span>1. 测试流程以及效果<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<p>测试流程为：easyflash初始化 → 读boottimes → boottimes++ → 写boottimes，反复复位重启800次。</p>
<ol class="arabic simple">
<li><p>easyflash初始化</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">uint32_t</span> <span class="n">timer_us</span><span class="p">;</span>

<span class="n">timer_us</span> <span class="o">=</span> <span class="n">bl_timer_now_us</span><span class="p">();</span>
<span class="n">easyflash_init</span><span class="p">();</span>
<span class="n">timer_us</span> <span class="o">=</span> <span class="n">bl_timer_now_us</span><span class="p">()</span> <span class="o">-</span> <span class="n">timer_us</span><span class="p">;</span>
<span class="n">printf</span><span class="p">(</span><span class="s2">&quot;easyflash init time us </span><span class="si">%ld</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timer_us</span><span class="p">);</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>读写boottimes</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">static</span> <span class="n">void</span> <span class="n">__easyflash_boottimes_dump</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">char</span> <span class="o">*</span><span class="n">times</span> <span class="o">=</span> <span class="n">NULL</span><span class="p">;</span>
    <span class="n">uint32_t</span> <span class="n">times_num</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">char</span> <span class="n">env_set</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

    <span class="n">uint32_t</span> <span class="n">timer_us</span><span class="p">;</span>

    <span class="n">timer_us</span> <span class="o">=</span> <span class="n">bl_timer_now_us</span><span class="p">();</span>
    <span class="n">times</span> <span class="o">=</span> <span class="n">ef_get_env</span><span class="p">(</span><span class="n">EASYFLASH_BOOT_TIMES</span><span class="p">);</span>
    <span class="n">timer_us</span> <span class="o">=</span> <span class="n">bl_timer_now_us</span><span class="p">()</span> <span class="o">-</span> <span class="n">timer_us</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;easyflash read boot_times us </span><span class="si">%ld</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timer_us</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">times</span> <span class="o">==</span> <span class="n">NULL</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">__easyflash_first_boottimes</span><span class="p">();</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">times_num</span> <span class="o">=</span> <span class="n">atoi</span><span class="p">(</span><span class="n">times</span><span class="p">);</span>
    <span class="n">sprintf</span><span class="p">(</span><span class="n">env_set</span><span class="p">,</span> <span class="s2">&quot;</span><span class="si">%ld</span><span class="s2">&quot;</span><span class="p">,</span> <span class="o">++</span><span class="n">times_num</span><span class="p">);</span>

    <span class="n">timer_us</span> <span class="o">=</span> <span class="n">bl_timer_now_us</span><span class="p">();</span>
    <span class="n">ef_set_env</span><span class="p">(</span><span class="n">EASYFLASH_BOOT_TIMES</span><span class="p">,</span> <span class="n">env_set</span><span class="p">);</span>
    <span class="n">ef_save_env</span><span class="p">();</span>
    <span class="n">timer_us</span> <span class="o">=</span> <span class="n">bl_timer_now_us</span><span class="p">()</span> <span class="o">-</span> <span class="n">timer_us</span><span class="p">;</span>
    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;easyflash write boot_times us </span><span class="si">%ld</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">timer_us</span><span class="p">);</span>

    <span class="n">printf</span><span class="p">(</span><span class="s2">&quot;The system now boot times </span><span class="si">%ld</span><span class="se">\r\n</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">times_num</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<ol class="arabic" start="3">
<li><p>测试结果如下图：</p>
<blockquote>
<div><figure class="align-default">
<a class="reference internal image-reference" href="../../_images/image55.png"><img alt="" src="../../_images/image55.png" style="width: 900px; height: 450px;" /></a>
</figure>
</div></blockquote>
</li>
</ol>
<p>横坐标：boot times （单位：次数）</p>
<p>纵坐标：时间（单位：us）</p>
<p>红色线：easyflash 初始化耗时</p>
<p>绿色线：easyflash 写耗时</p>
<p>黄色线：读easyflash耗时</p>
</section>
<section id="id7">
<h3><span class="section-number">27.3.2. </span>2. 测试分析<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>easyflash_init过程包含读和其他操作,故初始化时间与读时间相关。图中第一次出现尖峰现象说明此时easyflash在检查并格式化扇区，详见： <a class="reference internal" href="#id3">首次使用</a>。</p></li>
<li><p>读过程分析：由于easyflash4每write一次kv（写KV详细过程见： <a class="reference internal" href="#kv">添加KV</a>），都会在old_kv地址后新增一个kv,再将old_kv标记为“delete”,所以每读一次kv，都需要遍历一遍kv，write次数越多，读耗时越长。</p></li>
<li><p>写过程分析：写之前都需要read找到kv（修改KV详细过程见： <a class="reference internal" href="#id5">修改KV</a>），本次测试write在read之后，每read一次后easyflash会更新到cache，故write的时间并没有与read呈线性关系。</p></li>
<li><p>图中可见，在boottimes在688次左右时，读写操作时间“初始化”了，同时write的时间出现尖峰，此时触发了GC（触发GC过程详见： <a class="reference internal" href="#gc">触发GC</a>），说明flash的大小已经快操作尽，只剩一个空闲sector。</p></li>
</ol>
</section>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../sdk_app_pwm/pwm.html" class="btn btn-neutral float-right" title="28. Pwm" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../demo_zb/zigbee.html" class="btn btn-neutral float-left" title="26. Zigbee" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Bouffalo Lab, volunteers.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>